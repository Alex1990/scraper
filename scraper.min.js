!function(a){"use strict";function b(a,b){return"function"==typeof a?function(){a.call(b)}:void 0}function c(a,b){for(var c in b)a[c]=b[c];return a}function d(a){for(var b=0;a=a.offsetParent;)b+=a.offsetLeft;return b}function e(a){for(var b=0;a=a.offsetParent;)b+=a.offsetTop;return b}function f(){return window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft}function g(){return window.scrollY||document.documentElement.scrollTop||document.body.scrollTop}var h=function(a,h){function i(){v=!0,h.onscrape.call(h),v&&q(a,"mousemove",k)}function j(){v&&(r(a,"mousemove",k),v=!1)}function k(a){a.stopPropagation();var b,c,i,j,k=[a],l=t,m=h.prizeArea,q=h.pointRadius;for(!n||o||p||(k=a.targetTouches),c=k.length,b=0;c>b;b++)i=k[b].clientX+f()-d(this),j=k[b].clientY+g()-e(this),l.save(),l.beginPath(),l.arc(i,j,q,0,2*Math.PI),l.clip(),l.clearRect(i-q,j-q,2*q,2*q),l.restore(),i>=m[0]&&j>=m[1]&&i<=m[0]+m[2]&&j<=m[1]+m[3]&&h.onresult()}var l,m,n="ontouchstart"in window||navigator.msMaxTouchPoints,o=window.navigator.pointerEnabled?!0:!1,p=window.navigator.msPointerEnabled&&!o?!0:!1;n&&(o?(l="pointerdown",m="pointermove"):p?(l="MSPointerDown",m="MSPointerMove"):(l="touchstart",m="touchmove"));var q;document.addEventListener?q=function(a,b,c){a.addEventListener(b,c,!1)}:document.attachEvent&&(q=function(a,b,c){a[b+c]=function(b){b=window.event,b.target=b.srcElement,b.currentTarget=a,b.preventDefault=function(){b.returnValue=!1},b.stopPropagation=function(){b.cancalBubble=!0},c.call(a,b)},a.attachEvent("on"+b,a[b+c])});var r;document.removeEventListener?r=function(a,b,c){a.removeEventListener(b,c,!1)}:document.detachEvent&&(r=function(a,b,c){a.detachEvent("on"+b,a[b+c]),a[b+c]=null});var s={coverText:["",0,0],coverFont:"24px Arial, Microsoft Yahei, sans-serif",coverColor:"#333",coverBgColor:"#eee",pointRadius:10,prizeArea:[0,0,100,40],shape:null,shapeX:0,shapeY:0,shapeW:null,shapeH:null,onscrape:function(){},onresult:function(){}};h=c(s,h),h.width=a.width,h.height=a.height;var t=a.getContext("2d");if(h.shape){var u=new Image;u.src=h.shape,t.drawImage(u,h.shapeX,h.shapeY,h.shapeW,h.shapeH)}else t.beginPath(),t.fillStyle=h.coverBgColor,t.rect(0,0,h.width,h.height),t.fill(),t.closePath();h.coverFont&&(t.beginPath(),t.fillStyle=h.coverColor,t.font=h.coverFont,t.fillText(h.coverText[0],h.coverText[1]||0,h.coverText[2]||0),t.closePath());var v=!1;n?q(a,l,b(h.onscrape,h)):(q(a,"mousedown",i),q(a,"mouseup",j)),n&&q(a,m,k)};a.scraper=h}(window);