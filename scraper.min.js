!function(a){"use strict";function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b=0;a=a.offsetParent;)b+=a.offsetLeft;return b}function d(a){for(var b=0;a=a.offsetParent;)b+=a.offsetTop;return b}function e(){return window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft}function f(){return window.scrollY||document.documentElement.scrollTop||document.body.scrollTop}var g=function(a,g){function h(){q(g.bindElement,l,j)}function i(){r(g.bindElement,l,j)}function j(b){b.preventDefault(),b.stopPropagation(),v||g.onscrape.call(g);var h,i,j,k,l=[b],m=t,q=g.prizeArea,r=g.pointRadius;for(!n||o||p||(l=b.targetTouches),i=l.length,h=0;i>h;h++)j=l[h].clientX+e()-c(a),k=l[h].clientY+f()-d(a),m.save(),m.globalCompositeOperation="destination-out",m.beginPath(),m.arc(j,k,r,0,2*Math.PI),m.fill(),m.restore(),j>=q[0]&&k>=q[1]&&j<=q[0]+q[2]&&k<=q[1]+q[3]&&(g.onresult(),v=!0)}var k,l,m,n="ontouchstart"in window||navigator.msMaxTouchPoints,o=window.navigator.pointerEnabled?!0:!1,p=window.navigator.msPointerEnabled&&!o?!0:!1;n?o?(k="pointerdown",l="pointermove",m="pointerup"):p?(k="MSPointerDown",l="MSPointerMove",m="MSPointerUp"):(k="touchstart",l="touchmove",m="touchend"):(k="mousedown",l="mousemove",m="mouseup");var q;document.addEventListener?q=function(a,b,c){a.addEventListener(b,c,!1)}:document.attachEvent&&(q=function(a,b,c){a[b+c]=function(b){b=window.event,b.target=b.srcElement,b.currentTarget=a,b.preventDefault=function(){b.returnValue=!1},b.stopPropagation=function(){b.cancalBubble=!0},c.call(a,b)},a.attachEvent("on"+b,a[b+c])});var r;document.removeEventListener?r=function(a,b,c){a.removeEventListener(b,c,!1)}:document.detachEvent&&(r=function(a,b,c){a.detachEvent("on"+b,a[b+c]),a[b+c]=null});var s={bindElement:a,coverText:["",0,0],coverFont:"24px Arial, Microsoft Yahei, sans-serif",coverColor:"#f00",coverBgColor:"#eee",pointRadius:10,prizeArea:[0,0,100,40],shape:null,shapeX:0,shapeY:0,shapeW:void 0,shapeH:void 0,onscrape:function(){},onresult:function(){}};g=b(s,g),g.width=a.width,g.height=a.height;var t=a.getContext("2d");if(g.shape){var u=document.createElement("img");u.onload=function(){t.drawImage(u,g.shapeX,g.shapeY),t.fillStyle=g.coverColor,t.font=g.coverFont,t.fillText(g.coverText[0],g.coverText[1]||0,g.coverText[2]||0)},u.src=g.shape}else t.fillStyle=g.coverBgColor,t.rect(0,0,g.width,g.height),t.fill();!g.shape&&g.coverFont&&(t.fillStyle=g.coverColor,t.font=g.coverFont,t.fillText(g.coverText[0],g.coverText[1]||0,g.coverText[2]||0)),q(document,k,h),q(document,m,i);var v=!1};a.scraper=g}(window);